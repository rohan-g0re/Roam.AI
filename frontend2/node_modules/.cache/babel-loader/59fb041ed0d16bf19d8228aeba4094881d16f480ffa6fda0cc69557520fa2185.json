{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sahil\\\\Desktop\\\\NewRoamAI\\\\frontend\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { GoogleMap, useJsApiLoader, Marker, InfoWindow } from '@react-google-maps/api';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: 'calc(100vh - 156px)',\n  borderRadius: '8px',\n  marginBottom: '56px'\n};\nfunction Map({\n  onMarkerClick\n}) {\n  _s();\n  const [userLocation, setUserLocation] = useState(null);\n  const [contentLocations, setContentLocations] = useState([]);\n  const [selectedMarker, setSelectedMarker] = useState(null);\n  const [mapConfig, setMapConfig] = useState({\n    center: {\n      lat: 40.7580,\n      lng: -73.9855\n    },\n    // Centered on Times Square initially\n    zoom: 12\n  });\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\n    libraries: ['places']\n  });\n\n  // Get user's location\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        const newLocation = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        setUserLocation(newLocation);\n        setMapConfig(prev => ({\n          ...prev,\n          center: newLocation\n        }));\n      }, error => {\n        console.error('Error getting location:', error);\n      });\n    }\n  }, []);\n\n  // Fetch content locations\n  useEffect(() => {\n    const fetchContentLocations = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/places/all');\n        if (response.data.status === 'success') {\n          console.log('Fetched locations:', response.data.data);\n          setContentLocations(response.data.data);\n        }\n      } catch (error) {\n        console.error('Error fetching content locations:', error);\n      }\n    };\n    fetchContentLocations();\n  }, []);\n  if (!isLoaded) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading map...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 27\n  }, this);\n\n  // Define marker icons\n  const userMarkerIcon = {\n    path: 0,\n    // Circle path\n    scale: 8,\n    fillColor: '#4285F4',\n    // Blue for user location\n    fillOpacity: 1,\n    strokeColor: '#FFFFFF',\n    strokeWeight: 2\n  };\n  const contentMarkerIcon = {\n    path: \"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\",\n    fillColor: '#FF0000',\n    // Red for content locations\n    fillOpacity: 1,\n    strokeColor: '#FFFFFF',\n    strokeWeight: 2,\n    scale: 2,\n    anchor: new window.google.maps.Point(12, 24)\n  };\n  return /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerStyle: containerStyle,\n    center: mapConfig.center,\n    zoom: mapConfig.zoom,\n    onClick: () => setSelectedMarker(null),\n    children: [userLocation && /*#__PURE__*/_jsxDEV(Marker, {\n      position: userLocation,\n      icon: userMarkerIcon,\n      title: \"Your Location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }, this), contentLocations.map(content => /*#__PURE__*/_jsxDEV(Marker, {\n      position: {\n        lat: content.position.lat,\n        lng: content.position.lng\n      },\n      icon: contentMarkerIcon,\n      onClick: () => setSelectedMarker(content)\n    }, content.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, this)), selectedMarker && /*#__PURE__*/_jsxDEV(InfoWindow, {\n      position: selectedMarker.position,\n      onCloseClick: () => setSelectedMarker(null),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: '200px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 5px 0',\n            fontSize: '16px'\n          },\n          children: selectedMarker.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0 0 5px 0',\n            fontSize: '14px'\n          },\n          children: selectedMarker.place_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }, this), selectedMarker.media.image_url && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: selectedMarker.media.image_url,\n          alt: selectedMarker.title,\n          style: {\n            width: '100%',\n            marginBottom: '5px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            margin: '0',\n            fontSize: '12px'\n          },\n          children: selectedMarker.description.length > 100 ? `${selectedMarker.description.substring(0, 100)}...` : selectedMarker.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n}\n_s(Map, \"kDMn6oKjDwg6R2Waxx6yrkcVsSo=\", false, function () {\n  return [useJsApiLoader];\n});\n_c = Map;\nexport default _c2 = /*#__PURE__*/React.memo(Map);\nvar _c, _c2;\n$RefreshReg$(_c, \"Map\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useState","useEffect","GoogleMap","useJsApiLoader","Marker","InfoWindow","axios","jsxDEV","_jsxDEV","containerStyle","width","height","borderRadius","marginBottom","Map","onMarkerClick","_s","userLocation","setUserLocation","contentLocations","setContentLocations","selectedMarker","setSelectedMarker","mapConfig","setMapConfig","center","lat","lng","zoom","isLoaded","id","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","libraries","navigator","geolocation","getCurrentPosition","position","newLocation","coords","latitude","longitude","prev","error","console","fetchContentLocations","response","get","data","status","log","children","fileName","_jsxFileName","lineNumber","columnNumber","userMarkerIcon","path","scale","fillColor","fillOpacity","strokeColor","strokeWeight","contentMarkerIcon","anchor","window","google","maps","Point","mapContainerStyle","onClick","icon","title","map","content","onCloseClick","style","maxWidth","margin","fontSize","place_name","media","image_url","src","alt","description","length","substring","_c","_c2","memo","$RefreshReg$"],"sources":["C:/Users/Sahil/Desktop/NewRoamAI/frontend/src/components/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { GoogleMap, useJsApiLoader, Marker, InfoWindow } from '@react-google-maps/api';\r\nimport axios from 'axios';\r\n\r\nconst containerStyle = {\r\n    width: '100%',\r\n    height: 'calc(100vh - 156px)',\r\n    borderRadius: '8px',\r\n    marginBottom: '56px'\r\n};\r\n\r\nfunction Map({ onMarkerClick }) {\r\n    const [userLocation, setUserLocation] = useState(null);\r\n    const [contentLocations, setContentLocations] = useState([]);\r\n    const [selectedMarker, setSelectedMarker] = useState(null);\r\n    const [mapConfig, setMapConfig] = useState({\r\n        center: { lat: 40.7580, lng: -73.9855 },  // Centered on Times Square initially\r\n        zoom: 12\r\n    });\r\n\r\n    const { isLoaded } = useJsApiLoader({\r\n        id: 'google-map-script',\r\n        googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\r\n        libraries: ['places']\r\n    });\r\n\r\n    // Get user's location\r\n    useEffect(() => {\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(\r\n                (position) => {\r\n                    const newLocation = {\r\n                        lat: position.coords.latitude,\r\n                        lng: position.coords.longitude\r\n                    };\r\n                    setUserLocation(newLocation);\r\n                    setMapConfig(prev => ({ ...prev, center: newLocation }));\r\n                },\r\n                (error) => {\r\n                    console.error('Error getting location:', error);\r\n                }\r\n            );\r\n        }\r\n    }, []);\r\n\r\n    // Fetch content locations\r\n    useEffect(() => {\r\n        const fetchContentLocations = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:5000/api/places/all');\r\n                if (response.data.status === 'success') {\r\n                    console.log('Fetched locations:', response.data.data);\r\n                    setContentLocations(response.data.data);\r\n                }\r\n            } catch (error) {\r\n                console.error('Error fetching content locations:', error);\r\n            }\r\n        };\r\n\r\n        fetchContentLocations();\r\n    }, []);\r\n\r\n    if (!isLoaded) return <div>Loading map...</div>;\r\n\r\n    // Define marker icons\r\n    const userMarkerIcon = {\r\n        path: 0,  // Circle path\r\n        scale: 8,\r\n        fillColor: '#4285F4',  // Blue for user location\r\n        fillOpacity: 1,\r\n        strokeColor: '#FFFFFF',\r\n        strokeWeight: 2,\r\n    };\r\n\r\n    const contentMarkerIcon = {\r\n      path: \"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\",\r\n      fillColor: '#FF0000',  // Red for content locations\r\n      fillOpacity: 1,\r\n      strokeColor: '#FFFFFF',\r\n      strokeWeight: 2,\r\n      scale: 2,\r\n      anchor: new window.google.maps.Point(12, 24),\r\n  };\r\n\r\n    return (\r\n        <GoogleMap\r\n            mapContainerStyle={containerStyle}\r\n            center={mapConfig.center}\r\n            zoom={mapConfig.zoom}\r\n            onClick={() => setSelectedMarker(null)}\r\n        >\r\n            {/* User Location Marker */}\r\n            {userLocation && (\r\n                <Marker\r\n                    position={userLocation}\r\n                    icon={userMarkerIcon}\r\n                    title=\"Your Location\"\r\n                />\r\n            )}\r\n\r\n            {/* Content Location Markers */}\r\n            {contentLocations.map((content) => (\r\n                <Marker\r\n                    key={content.id}\r\n                    position={{\r\n                        lat: content.position.lat,\r\n                        lng: content.position.lng\r\n                    }}\r\n                    icon={contentMarkerIcon}\r\n                    onClick={() => setSelectedMarker(content)}\r\n                />\r\n            ))}\r\n\r\n            {/* Info Window for selected marker */}\r\n            {selectedMarker && (\r\n                <InfoWindow\r\n                    position={selectedMarker.position}\r\n                    onCloseClick={() => setSelectedMarker(null)}\r\n                >\r\n                    <div style={{ maxWidth: '200px' }}>\r\n                        <h3 style={{ margin: '0 0 5px 0', fontSize: '16px' }}>\r\n                            {selectedMarker.title}\r\n                        </h3>\r\n                        <p style={{ margin: '0 0 5px 0', fontSize: '14px' }}>\r\n                            {selectedMarker.place_name}\r\n                        </p>\r\n                        {selectedMarker.media.image_url && (\r\n                            <img \r\n                                src={selectedMarker.media.image_url} \r\n                                alt={selectedMarker.title}\r\n                                style={{ width: '100%', marginBottom: '5px' }}\r\n                            />\r\n                        )}\r\n                        <p style={{ margin: '0', fontSize: '12px' }}>\r\n                            {selectedMarker.description.length > 100 \r\n                                ? `${selectedMarker.description.substring(0, 100)}...` \r\n                                : selectedMarker.description}\r\n                        </p>\r\n                    </div>\r\n                </InfoWindow>\r\n            )}\r\n        </GoogleMap>\r\n    );\r\n}\r\n\r\nexport default React.memo(Map);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}